{"ast":null,"code":"var _jsxFileName = \"/home/nico/Escritorio/STOCK/stock-charles/frontend/src/components/AgregarLibro.jsx\",\n  _s = $RefreshSig$();\n// components/AgregarLibro.jsx\nimport React, { useState, useEffect } from \"react\";\nimport { useAppContext } from \"../context/appContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AgregarLibro = () => {\n  _s();\n  const {\n    actions\n  } = useAppContext();\n  const [formData, setFormData] = useState({\n    isbn: \"\",\n    titulo: \"\",\n    autor: \"\",\n    editorial: \"\",\n    stock: 1,\n    precio: 0,\n    ubicacion: \"\"\n  });\n  const [mensaje, setMensaje] = useState(\"\");\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value\n    });\n    setMensaje(\"\");\n  };\n  const handleAutocomplete = async () => {\n    if (!formData.isbn) return;\n    try {\n      const response = await fetch(`http://localhost:5000/libros?isbn=${formData.isbn}`);\n      const data = await response.json();\n      if (response.ok && data.length > 0) {\n        const libro = data[0];\n        setFormData({\n          isbn: formData.isbn,\n          titulo: libro.titulo || \"\",\n          autor: libro.autor || \"\",\n          editorial: libro.editorial || \"\",\n          stock: libro.stock || 1,\n          precio: libro.precio || 0,\n          ubicacion: libro.ubicacion || \"\"\n        });\n      } else {\n        // Limpiar los demás campos si no se encuentra el libro\n        setFormData(prev => ({\n          ...prev,\n          titulo: \"\",\n          autor: \"\",\n          editorial: \"\",\n          stock: 1,\n          precio: 0,\n          ubicacion: \"\"\n        }));\n      }\n    } catch (error) {\n      console.error(\"Error al autocompletar:\", error);\n      alert(\"No se pudo autocompletar con los datos del servidor.\");\n    }\n  };\n  useEffect(() => {\n    if (formData.isbn) {\n      handleAutocomplete();\n    }\n  }, [formData.isbn]);\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (!formData.isbn || !formData.titulo || !formData.autor) {\n      alert(\"Por favor completá los campos obligatorios.\");\n      return;\n    }\n    if (formData.stock < 1 || formData.precio < 0) {\n      alert(\"Stock mínimo 1. El precio no puede ser negativo.\");\n      return;\n    }\n    actions.addBook(formData);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container mt-5\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"card shadow-lg p-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"mb-4 text-center\",\n        children: \"Crear Nuevo Libro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this), mensaje && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"alert alert-info\",\n        children: mensaje\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [[{\n          id: \"isbn\",\n          label: \"ISBN\",\n          required: true\n        }, {\n          id: \"titulo\",\n          label: \"Título\",\n          required: true\n        }, {\n          id: \"autor\",\n          label: \"Autor\",\n          required: true\n        }, {\n          id: \"editorial\",\n          label: \"Editorial\"\n        }, {\n          id: \"stock\",\n          label: \"Stock (mínimo 1)\",\n          type: \"number\",\n          min: 1\n        }, {\n          id: \"precio\",\n          label: \"Precio\",\n          type: \"number\",\n          min: 0\n        }, {\n          id: \"ubicacion\",\n          label: \"Ubicación\"\n        }].map(({\n          id,\n          label,\n          required,\n          type = \"text\",\n          min\n        }) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: id,\n            className: \"form-label\",\n            children: [label, \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: type,\n            className: \"form-control\",\n            id: id,\n            name: id,\n            value: formData[id],\n            onChange: handleChange,\n            required: required,\n            min: min\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 15\n          }, this)]\n        }, id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 13\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-grid mt-4\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            className: \"btn btn-primary btn-lg\",\n            children: \"Guardar Libro\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 90,\n    columnNumber: 5\n  }, this);\n};\n_s(AgregarLibro, \"ctdzEKf6IeBucNtY49i7OPPKP80=\", false, function () {\n  return [useAppContext];\n});\n_c = AgregarLibro;\nexport default AgregarLibro;\nvar _c;\n$RefreshReg$(_c, \"AgregarLibro\");","map":{"version":3,"names":["React","useState","useEffect","useAppContext","jsxDEV","_jsxDEV","AgregarLibro","_s","actions","formData","setFormData","isbn","titulo","autor","editorial","stock","precio","ubicacion","mensaje","setMensaje","handleChange","e","name","value","target","handleAutocomplete","response","fetch","data","json","ok","length","libro","prev","error","console","alert","handleSubmit","preventDefault","addBook","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","id","label","required","type","min","map","htmlFor","onChange","_c","$RefreshReg$"],"sources":["/home/nico/Escritorio/STOCK/stock-charles/frontend/src/components/AgregarLibro.jsx"],"sourcesContent":["// components/AgregarLibro.jsx\nimport React, { useState, useEffect } from \"react\";\nimport { useAppContext } from \"../context/appContext\";\n\nconst AgregarLibro = () => {\n  const { actions } = useAppContext();\n\n  const [formData, setFormData] = useState({\n    isbn: \"\",\n    titulo: \"\",\n    autor: \"\",\n    editorial: \"\",\n    stock: 1,\n    precio: 0,\n    ubicacion: \"\",\n  });\n\n  const [mensaje, setMensaje] = useState(\"\");\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData({\n      ...formData,\n      [name]: value,\n    });\n    setMensaje(\"\");\n  };\n\n  const handleAutocomplete = async () => {\n    if (!formData.isbn) return;\n\n    try {\n      const response = await fetch(\n        `http://localhost:5000/libros?isbn=${formData.isbn}`\n      );\n      const data = await response.json();\n\n      if (response.ok && data.length > 0) {\n        const libro = data[0];\n        setFormData({\n          isbn: formData.isbn,\n          titulo: libro.titulo || \"\",\n          autor: libro.autor || \"\",\n          editorial: libro.editorial || \"\",\n          stock: libro.stock || 1,\n          precio: libro.precio || 0,\n          ubicacion: libro.ubicacion || \"\",\n        });\n      } else {\n        // Limpiar los demás campos si no se encuentra el libro\n        setFormData((prev) => ({\n          ...prev,\n          titulo: \"\",\n          autor: \"\",\n          editorial: \"\",\n          stock: 1,\n          precio: 0,\n          ubicacion: \"\",\n        }));\n      }\n    } catch (error) {\n      console.error(\"Error al autocompletar:\", error);\n      alert(\"No se pudo autocompletar con los datos del servidor.\");\n    }\n  };\n\n  useEffect(() => {\n    if (formData.isbn) {\n      handleAutocomplete();\n    }\n  }, [formData.isbn]);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n\n    if (!formData.isbn || !formData.titulo || !formData.autor) {\n      alert(\"Por favor completá los campos obligatorios.\");\n      return;\n    }\n\n    if (formData.stock < 1 || formData.precio < 0) {\n      alert(\"Stock mínimo 1. El precio no puede ser negativo.\");\n      return;\n    }\n\n    actions.addBook(formData);\n  };\n\n  return (\n    <div className=\"container mt-5\">\n      <div className=\"card shadow-lg p-4\">\n        <h2 className=\"mb-4 text-center\">Crear Nuevo Libro</h2>\n        {mensaje && <div className=\"alert alert-info\">{mensaje}</div>}\n        <form onSubmit={handleSubmit}>\n          {/* Inputs */}\n          {[\n            { id: \"isbn\", label: \"ISBN\", required: true },\n            { id: \"titulo\", label: \"Título\", required: true },\n            { id: \"autor\", label: \"Autor\", required: true },\n            { id: \"editorial\", label: \"Editorial\" },\n            { id: \"stock\", label: \"Stock (mínimo 1)\", type: \"number\", min: 1 },\n            { id: \"precio\", label: \"Precio\", type: \"number\", min: 0 },\n            { id: \"ubicacion\", label: \"Ubicación\" },\n          ].map(({ id, label, required, type = \"text\", min }) => (\n            <div className=\"mb-3\" key={id}>\n              <label htmlFor={id} className=\"form-label\">\n                {label}:\n              </label>\n              <input\n                type={type}\n                className=\"form-control\"\n                id={id}\n                name={id}\n                value={formData[id]}\n                onChange={handleChange}\n                required={required}\n                min={min}\n              />\n            </div>\n          ))}\n\n          <div className=\"d-grid mt-4\">\n            <button type=\"submit\" className=\"btn btn-primary btn-lg\">\n              Guardar Libro\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AgregarLibro;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}